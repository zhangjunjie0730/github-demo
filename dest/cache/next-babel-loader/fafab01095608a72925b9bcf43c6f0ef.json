{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\MyGit\\\\github-demo\\\\components\\\\Markdown\\\\index.jsx\";\nimport { memo, useMemo } from 'react';\nimport 'github-markdown-css';\nimport MarkdownIt from 'markdown-it';\nimport hljs from 'highlight.js/lib/highlight';\nimport javascript from 'highlight.js/lib/languages/javascript';\nimport 'highlight.js/styles/default.css';\nimport 'github-markdown-css';\nhljs.registerLanguage('javascript', javascript);\nhljs.registerLanguage('js', javascript);\n\nfunction b64ToUtf8(str) {\n  return decodeURIComponent(escape(atob(str)));\n}\n\nconst md = new MarkdownIt({\n  html: true,\n  // html文字也能正常转义成md\n  linkify: true,\n\n  // 带http的可以自动变成链接\n  highlight(str, lang) {\n    if (lang && hljs.getLanguage(lang)) {\n      try {\n        return hljs.highlight(lang, str, true).value;\n      } catch (e) {\n        console.error(e);\n      }\n    }\n\n    return ''; // 使用额外的默认转义\n  }\n\n});\nlet hljsInited = false;\nconst Markdown = /*#__PURE__*/memo(({\n  isBase64,\n  content\n}) => {\n  const converted = isBase64 ? b64ToUtf8(content) : content;\n  const html = useMemo(() => md.render(converted), [converted]);\n\n  if (!hljsInited && false) {\n    hljs.initHighlightingOnLoad();\n    hljsInited = true;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"markdown-body\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: html\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n});\nexport default Markdown;","map":{"version":3,"sources":["E:/MyGit/github-demo/components/Markdown/index.jsx"],"names":["memo","useMemo","MarkdownIt","hljs","javascript","registerLanguage","b64ToUtf8","str","decodeURIComponent","escape","atob","md","html","linkify","highlight","lang","getLanguage","value","e","console","error","hljsInited","Markdown","isBase64","content","converted","render","initHighlightingOnLoad","__html"],"mappings":";;AAAA,SAASA,IAAT,EAAeC,OAAf,QAA8B,OAA9B;AACA,OAAO,qBAAP;AACA,OAAOC,UAAP,MAAuB,aAAvB;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,OAAOC,UAAP,MAAuB,uCAAvB;AACA,OAAO,iCAAP;AACA,OAAO,qBAAP;AAEAD,IAAI,CAACE,gBAAL,CAAsB,YAAtB,EAAoCD,UAApC;AACAD,IAAI,CAACE,gBAAL,CAAsB,IAAtB,EAA4BD,UAA5B;;AAEA,SAASE,SAAT,CAAmBC,GAAnB,EAAwB;AACtB,SAAOC,kBAAkB,CAACC,MAAM,CAACC,IAAI,CAACH,GAAD,CAAL,CAAP,CAAzB;AACD;;AAED,MAAMI,EAAE,GAAG,IAAIT,UAAJ,CAAe;AACxBU,EAAAA,IAAI,EAAE,IADkB;AACZ;AACZC,EAAAA,OAAO,EAAE,IAFe;;AAET;AACfC,EAAAA,SAAS,CAACP,GAAD,EAAMQ,IAAN,EAAY;AACnB,QAAIA,IAAI,IAAIZ,IAAI,CAACa,WAAL,CAAiBD,IAAjB,CAAZ,EAAoC;AAClC,UAAI;AACF,eAAOZ,IAAI,CAACW,SAAL,CAAeC,IAAf,EAAqBR,GAArB,EAA0B,IAA1B,EAAgCU,KAAvC;AACD,OAFD,CAEE,OAAOC,CAAP,EAAU;AACVC,QAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACD;AACF;;AACD,WAAO,EAAP,CARmB,CAQR;AACZ;;AAZuB,CAAf,CAAX;AAeA,IAAIG,UAAU,GAAG,KAAjB;AACA,MAAMC,QAAQ,gBAAGtB,IAAI,CAAC,CAAC;AAAEuB,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAAD,KAA2B;AAC/C,QAAMC,SAAS,GAAGF,QAAQ,GAAGjB,SAAS,CAACkB,OAAD,CAAZ,GAAwBA,OAAlD;AACA,QAAMZ,IAAI,GAAGX,OAAO,CAAC,MAAMU,EAAE,CAACe,MAAH,CAAUD,SAAV,CAAP,EAA6B,CAACA,SAAD,CAA7B,CAApB;;AAEA,MAAI,CAACJ,UAAD,SAAJ,EAAkD;AAChDlB,IAAAA,IAAI,CAACwB,sBAAL;AACAN,IAAAA,UAAU,GAAG,IAAb;AACD;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,2BACE;AAAK,MAAA,uBAAuB,EAAE;AAAEO,QAAAA,MAAM,EAAEhB;AAAV;AAA9B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAKD,CAdoB,CAArB;AAgBA,eAAeU,QAAf","sourcesContent":["import { memo, useMemo } from 'react';\r\nimport 'github-markdown-css';\r\nimport MarkdownIt from 'markdown-it';\r\nimport hljs from 'highlight.js/lib/highlight';\r\nimport javascript from 'highlight.js/lib/languages/javascript';\r\nimport 'highlight.js/styles/default.css';\r\nimport 'github-markdown-css';\r\n\r\nhljs.registerLanguage('javascript', javascript);\r\nhljs.registerLanguage('js', javascript);\r\n\r\nfunction b64ToUtf8(str) {\r\n  return decodeURIComponent(escape(atob(str)));\r\n}\r\n\r\nconst md = new MarkdownIt({\r\n  html: true, // html文字也能正常转义成md\r\n  linkify: true, // 带http的可以自动变成链接\r\n  highlight(str, lang) {\r\n    if (lang && hljs.getLanguage(lang)) {\r\n      try {\r\n        return hljs.highlight(lang, str, true).value;\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    }\r\n    return ''; // 使用额外的默认转义\r\n  },\r\n});\r\n\r\nlet hljsInited = false;\r\nconst Markdown = memo(({ isBase64, content }) => {\r\n  const converted = isBase64 ? b64ToUtf8(content) : content;\r\n  const html = useMemo(() => md.render(converted), [converted]);\r\n\r\n  if (!hljsInited && typeof window !== 'undefined') {\r\n    hljs.initHighlightingOnLoad();\r\n    hljsInited = true;\r\n  }\r\n\r\n  return (\r\n    <div className=\"markdown-body\">\r\n      <div dangerouslySetInnerHTML={{ __html: html }} />\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Markdown;\r\n"]},"metadata":{},"sourceType":"module"}